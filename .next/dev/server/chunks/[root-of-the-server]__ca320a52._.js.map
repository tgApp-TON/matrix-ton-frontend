{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/stanislavozarchuk/Projects/matrix-ton/frontend/app/api/referral/validate/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\n\nexport async function GET(request: NextRequest) {\n  const searchParams = request.nextUrl.searchParams;\n  const code = searchParams.get('code');\n\n  if (!code) {\n    return NextResponse.json({ \n      valid: false, \n      error: 'No code provided' \n    }, { status: 400 });\n  }\n\n  try {\n    // TODO: После создания Supabase заменить на реальную проверку\n    // const referrer = await prisma.user.findUnique({\n    //   where: { referralCode: code },\n    //   select: { id: true, nickname: true, telegramUsername: true }\n    // });\n\n    // Временная заглушка для MVP тестирования\n    if (code === 'TEST123' || code === 'MASTER') {\n      return NextResponse.json({\n        valid: true,\n        referrer: {\n          id: 1,\n          nickname: 'MASTER',\n          username: 'matrixton_official'\n        }\n      });\n    }\n\n    return NextResponse.json({ \n      valid: false, \n      error: 'Invalid code' \n    });\n\n  } catch (error) {\n    console.error('Referral validation error:', error);\n    return NextResponse.json({ \n      valid: false, \n      error: 'Server error' \n    }, { status: 500 });\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEO,eAAe,IAAI,OAAoB;IAC5C,MAAM,eAAe,QAAQ,OAAO,CAAC,YAAY;IACjD,MAAM,OAAO,aAAa,GAAG,CAAC;IAE9B,IAAI,CAAC,MAAM;QACT,OAAO,4JAAY,CAAC,IAAI,CAAC;YACvB,OAAO;YACP,OAAO;QACT,GAAG;YAAE,QAAQ;QAAI;IACnB;IAEA,IAAI;QACF,8DAA8D;QAC9D,kDAAkD;QAClD,mCAAmC;QACnC,iEAAiE;QACjE,MAAM;QAEN,0CAA0C;QAC1C,IAAI,SAAS,aAAa,SAAS,UAAU;YAC3C,OAAO,4JAAY,CAAC,IAAI,CAAC;gBACvB,OAAO;gBACP,UAAU;oBACR,IAAI;oBACJ,UAAU;oBACV,UAAU;gBACZ;YACF;QACF;QAEA,OAAO,4JAAY,CAAC,IAAI,CAAC;YACvB,OAAO;YACP,OAAO;QACT;IAEF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,OAAO,4JAAY,CAAC,IAAI,CAAC;YACvB,OAAO;YACP,OAAO;QACT,GAAG;YAAE,QAAQ;QAAI;IACnB;AACF"}}]
}