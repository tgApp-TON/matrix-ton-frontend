{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/stanislavozarchuk/Projects/matrix-ton/frontend/lib/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!;\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;\n\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AACN,MAAM;AAEC,MAAM,WAAW,IAAA,4MAAY,EAAC,aAAa"}},
    {"offset": {"line": 59, "column": 0}, "map": {"version":3,"sources":["file:///Users/stanislavozarchuk/Projects/matrix-ton/frontend/app/api/admin/setup-master/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\nimport { supabase } from '@/lib/supabase';\n\nexport async function POST(request: NextRequest) {\n  try {\n    // Find MASTER user\n    const { data: masterUser, error: findError } = await supabase\n      .from('User')\n      .select('id')\n      .eq('nickname', 'MASTER')\n      .single();\n\n    if (findError || !masterUser) {\n      return NextResponse.json({ error: 'MASTER user not found' }, { status: 404 });\n    }\n\n    const masterId = masterUser.id;\n\n    // Update MASTER role to FOUNDER\n    const { error: updateError } = await supabase\n      .from('User')\n      .update({ role: 'FOUNDER' })\n      .eq('id', masterId);\n\n    if (updateError) {\n      console.error('Error updating MASTER role:', updateError);\n      return NextResponse.json({ error: updateError.message }, { status: 400 });\n    }\n\n    // Create all 12 tables for MASTER\n    const tables = [];\n    for (let tableNumber = 1; tableNumber <= 12; tableNumber++) {\n      const { data: table, error: tableError } = await supabase\n        .from('Table')\n        .insert({\n          userId: masterId,\n          tableNumber,\n          status: 'ACTIVE',\n          cycleNumber: 1\n        })\n        .select()\n        .single();\n\n      if (tableError) {\n        // Table might already exist, check if it's a duplicate error\n        if (tableError.code !== '23505') { // Not a unique constraint violation\n          console.error(`Error creating table ${tableNumber}:`, tableError);\n        }\n      } else {\n        tables.push(table);\n      }\n    }\n\n    return NextResponse.json({\n      success: true,\n      message: 'MASTER user setup complete',\n      masterId,\n      tablesCreated: tables.length,\n      tables\n    });\n  } catch (error) {\n    console.error('Setup error:', error);\n    return NextResponse.json({ error: 'Setup failed' }, { status: 500 });\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,mBAAmB;QACnB,MAAM,EAAE,MAAM,UAAU,EAAE,OAAO,SAAS,EAAE,GAAG,MAAM,yIAAQ,CAC1D,IAAI,CAAC,QACL,MAAM,CAAC,MACP,EAAE,CAAC,YAAY,UACf,MAAM;QAET,IAAI,aAAa,CAAC,YAAY;YAC5B,OAAO,4JAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAwB,GAAG;gBAAE,QAAQ;YAAI;QAC7E;QAEA,MAAM,WAAW,WAAW,EAAE;QAE9B,gCAAgC;QAChC,MAAM,EAAE,OAAO,WAAW,EAAE,GAAG,MAAM,yIAAQ,CAC1C,IAAI,CAAC,QACL,MAAM,CAAC;YAAE,MAAM;QAAU,GACzB,EAAE,CAAC,MAAM;QAEZ,IAAI,aAAa;YACf,QAAQ,KAAK,CAAC,+BAA+B;YAC7C,OAAO,4JAAY,CAAC,IAAI,CAAC;gBAAE,OAAO,YAAY,OAAO;YAAC,GAAG;gBAAE,QAAQ;YAAI;QACzE;QAEA,kCAAkC;QAClC,MAAM,SAAS,EAAE;QACjB,IAAK,IAAI,cAAc,GAAG,eAAe,IAAI,cAAe;YAC1D,MAAM,EAAE,MAAM,KAAK,EAAE,OAAO,UAAU,EAAE,GAAG,MAAM,yIAAQ,CACtD,IAAI,CAAC,SACL,MAAM,CAAC;gBACN,QAAQ;gBACR;gBACA,QAAQ;gBACR,aAAa;YACf,GACC,MAAM,GACN,MAAM;YAET,IAAI,YAAY;gBACd,6DAA6D;gBAC7D,IAAI,WAAW,IAAI,KAAK,SAAS;oBAC/B,QAAQ,KAAK,CAAC,CAAC,qBAAqB,EAAE,YAAY,CAAC,CAAC,EAAE;gBACxD;YACF,OAAO;gBACL,OAAO,IAAI,CAAC;YACd;QACF;QAEA,OAAO,4JAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,SAAS;YACT;YACA,eAAe,OAAO,MAAM;YAC5B;QACF;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,gBAAgB;QAC9B,OAAO,4JAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAe,GAAG;YAAE,QAAQ;QAAI;IACpE;AACF"}}]
}